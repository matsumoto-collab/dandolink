
> yusystem@0.1.0 test
> jest __tests__/hooks/useRealtimeSubscription.test.ts __tests__/stores

node.exe : FAIL __tests__/hooks/useRealtimeSubscription.test.ts
発生場所 行:1 文字:1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program Files\nodejs/nod
e_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~
    + CategoryInfo          : NotSpecified: (FAIL __tests__/...rip 
   tion.test.ts:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 
  笳・useRealtimeSubscription 窶ｺ should cleanup subscription on unmou
nt

    expect(jest.fn()).toHaveBeenCalledWith(...expected)

    Expected: {"on": [Function mockConstructor], "subscribe": [Func
tion mockConstructor], "unsubscribe": [Function mockConstructor]}

    Number of calls: 0

    Ignored nodes: comments, script, style
    [36m<html>[39m
      [36m<head />[39m
      [36m<body>[39m
        [36m<div />[39m
      [36m</body>[39m
    [36m</html>[39m

    [0m [90m 84 |[39m         [90m// Cleanup involves dynamic i
mport, so we wait for it[39m
     [90m 85 |[39m         [36mawait[39m waitFor(() [33m=>[39
m {
    [31m[1m>[22m[39m[90m 86 |[39m             expect(supabase
[33m.[39mremoveChannel)[33m.[39mtoHaveBeenCalledWith(mockChanne
l)[33m;[39m
     [90m    |[39m                                            [3
1m[1m^[22m[39m
     [90m 87 |[39m         })[33m;[39m
     [90m 88 |[39m     })[33m;[39m
     [90m 89 |[39m[0m

      at toHaveBeenCalledWith (__tests__/hooks/useRealtimeSubscript
ion.test.ts:86:44)
      at runWithExpensiveErrorDiagnosticsDisabled (node_modules/@te
sting-library/dom/dist/config.js:47:12)
      at checkCallback (node_modules/@testing-library/dom/dist/wait
-for.js:124:77)
      at node_modules/@testing-library/dom/dist/wait-for.js:82:9

FAIL __tests__/stores/calendarStore.test.ts
  笳・calendarStore 窶ｺ Assignments (Projects) 窶ｺ updateProject: shoul
d rollback on failure

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: undefined

    [0m [90m 206 |[39m             [36mconst[39m newDate [33m
=[39m [36mnew[39m [33mDate[39m([32m'2023-02-01T00:00:00.000Z'
[39m)[33m;[39m
     [90m 207 |[39m
    [31m[1m>[22m[39m[90m 208 |[39m             [36mawait[39
m expect([36masync[39m () [33m=>[39m {
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 209 |[39m                 [36mawait[39m act([36masyn
c[39m () [33m=>[39m {
     [90m 210 |[39m                     [36mawait[39m useCalend
arStore[33m.[39mgetState()[33m.[39mupdateProject([32m'a1'[39m
[33m,[39m { startDate[33m:[39m newDate })[33m;[39m
     [90m 211 |[39m                 })[33m;[39m[0m

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.expect (__tests__/stores/calendarStore.test.ts:208:
19)

PASS __tests__/stores/financeStore.test.ts
PASS __tests__/stores/masterStore.test.ts

Test Suites: 2 failed, 2 passed, 4 total
Tests:       2 failed, 54 passed, 56 total
Snapshots:   0 total
Time:        1.182 s
Ran all test suites matching __tests__/hooks/useRealtimeSubscriptio
n.test.ts|__tests__/stores.
